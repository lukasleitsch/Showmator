{
  "name": "node-pre-gyp",
  "description": "Node.js native addon binary install tool",
  "version": "0.2.6",
  "keywords": [
    "native",
    "addon",
    "module",
    "c",
    "c++",
    "bindings",
    "binary"
  ],
  "author": {
    "name": "Dane Springmeyer",
    "email": "dane@mapbox.com"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/springmeyer/node-pre-gyp.git"
  },
  "preferGlobal": true,
  "bin": {
    "node-pre-gyp": "./bin/node-pre-gyp"
  },
  "main": "./lib/node-pre-gyp.js",
  "dependencies": {
    "nopt": "~2.1.2",
    "npmlog": "~0.0.6",
    "request": "2",
    "semver": "~2.1.0",
    "tar": "~0.1.19",
    "tar-pack": "~2.0.0",
    "mkdirp": "~0.3.5",
    "aws-sdk": "~2.0.0-rc6",
    "rc": "~0.3.2",
    "rimraf": "~2.2.5"
  },
  "engines": {
    "node": ">= 0.8.0"
  },
  "scripts": {
    "test": "./test.sh"
  },
  "readme": "# node-pre-gyp\n\n[![Build Status](https://secure.travis-ci.org/springmeyer/node-pre-gyp.png)](https://travis-ci.org/springmeyer/node-pre-gyp)\n\n`node-pre-gyp` is a Node.js native add-on install tool.\n\n## Does this replace npm or node-gyp?\n\nNo: it plays nicely with them.\n\n - You still publish your package to the npm repository\n - You still create a `binding.gyp` to compile your module with `node-gyp`\n\nWhat node-pre-gyp does is stand between `npm` and `node-gyp`.\n\n## Who uses node-pre-gyp?\n\nYou: the developers of a C++ module. You use `node-pre-gyp` to package and and publish the binary `.node` right before you `npm publish` a new version.\n\nYour users: Once your package uses `node-pre-gyp` then users can `npm install` your module without a C++ compiler and `node-pre-gyp` handles the complexity behind the scenes.\n\n## Why use node-pre-gyp?\n\nSuccessful deployment of your module using `node-pre-gyp` will mean:\n\n - Users can be blissfully unaware that your module is written in C++\n - During development you will run `node-pre-gyp build` instead of `npm install`\n - You will take on the responsibility for providing binaries to your users\n\n## Modules using `node-pre-gyp`:\n\n - [node-sqlite3](https://github.com/mapbox/node-sqlite3)\n - [node-mapnik](https://github.com/mapnik/node-mapnik)\n - [node-osmium](https://github.com/osmcode/node-osmium)\n\nFor more examples see also the [test apps](test/).\n\n## Usage\n\n**1) You add a `binary` property to your modules `package.json`**\n\nIt must provide these properties:\n\n  - `module_name`: The name of your native node module.\n  - `module_path`: The location your native module is placed after a build (commonly `build/Release/`)\n  - `remote_uri`: A url to the remote location where you've published tarball binaries\n  - `template`: A string describing the tarball versioning scheme for your binaries\n\nAnd example from `node-osmium` looks like:\n\n```js\n    \"binary\": {\n        \"module_name\": \"osmium\",\n        \"module_path\": \"./lib\",\n        \"remote_uri\": \"http://node-osmium.s3.amazonaws.com\",\n        \"template\": \"{module_name}-v{major}.{minor}.{patch}-{node_abi}-{platform}-{arch}.tar.gz\"\n    },\n```\n\n**2) Build and package your app**\n\n```sh\nnode-pre-gyp build package\n```\n\n**3) Publish the tarball**\n\nPost the resulting tarball (in the `build/stage/` directory) to your `remote-uri`.\n\n - Learn how to [host on S3](#s3-hosting).\n - See [Travis Packaging](#travis-packaging) for recipes for automating publishing builds on OS X and Linux.\n\n**4) Add a custom `install` script**\n\n```js\n    \"scripts\": {\n        \"install\": \"node-pre-gyp install --fallback-to-build\",\n    }\n```\n\nThen users installing your module will get your binary, if available, instead of the default behavior of `npm` calling `node-gyp rebuild` right away. The `--fallback-to-build` option is recommended: if no binary is available for a given users platform then a source compile (`node-pre-gyp rebuild`) will be attempted.\n\n**5) You're done!**\n\nNow you are done. Publish your package to the npm registry. Users will now be able to install your module from a binary. \n\nWhat will happen is this:\n\n1. `npm install <your package>` will pull from the npm registry\n2. npm will run the `install` script which will call out to `node-pre-gyp`\n3. `node-pre-gyp` will fetch the binary `.node` module and place it in the right place\n4. Assuming that all worked, you are done\n\nIf a failure occurred and `--fallback-to-build` was used then `node-gyp rebuild` will be called.\n\n## S3 Hosting\n\nThe usage examples above and in the tests use Amazon S3 for hosting binaries. You can host wherever you choose but S3 is cheap, `node-pre-gyp publish` expects it, and S3 can be integrated well with [travis.ci](http://travis-ci.org) to automate builds for OS X and Ubuntu. Here is an approach to do this:\n\nFirst, get setup locally and test the workflow:\n\n**1) Create an S3 bucket and have your key and secret key ready**\n\n**2) Install node-pre-gyp**\n\nEither install it globally:\n\n    npm install node-pre-gyp -g\n\nOr put the local version on your PATH\n\n    export PATH=`pwd`/node_modules/.bin/:$PATH\n\n**3) Create an `~/.node_pre_gyprc`**\n\nOr pass options in any way supported by [RC](https://github.com/dominictarr/rc#standards)\n\n`~/.node_pre_gyprc` looks like:\n\n```js\n{\n    \"accessKeyId\": \"xxx\",\n    \"secretAccessKey\": \"xxx\"\n}\n```\n\nAnother way is to use your environment:\n\n    export node_pre_gyp_accessKeyId=xxx\n    export node_pre_gyp_secretAccessKey=xxx\n\nYou may also need to specify the `region` if it is not explicit in the `remote_uri` value you use. The `bucket` can also be specified but it is optional because `node-pre-gyp` will detect it from the `remote_uri` value.\n\n**4) Package and publish your build**\n\nDo this for every platform and node version you wish to support:\n\n    node-pre-gyp package publish\n\nNote: if you hit the error `Hostname/IP doesn't match certificate's altnames` it likely means that you need to provide the `region` option in your config.\n\n## Travis Packaging\n\nTravis can push to S3 after a successful build and supports both:\n\n - Ubuntu precise and OS X\n - multiple Node.js versions\n\nThis enables you to cheaply auto-build and auto-publish binaries for (likely) the majority of users.\n\n**1) Install the travis gem**\n\n    gem install travis\n\n**2) Create secure `global` variables**\n\nMake sure you run this command from within the directory of your module.\n\nUse `travis-encrypt` like:\n\n    travis encrypt node_pre_gyp_accessKeyId=${node_pre_gyp_accessKeyId}\n    travis encrypt node_pre_gyp_secretAccessKey=${node_pre_gyp_secretAccessKey}\n\nThen put those values in your `.travis.yml` like:\n\n```yaml\nenv:\n  global:\n    - secure: F+sEL/v56CzHqmCSSES4pEyC9NeQlkoR0Gs/ZuZxX1ytrj8SKtp3MKqBj7zhIclSdXBz4Ev966Da5ctmcTd410p0b240MV6BVOkLUtkjZJyErMBOkeb8n8yVfSoeMx8RiIhBmIvEn+rlQq+bSFis61/JkE9rxsjkGRZi14hHr4M=\n    - secure: o2nkUQIiABD139XS6L8pxq3XO5gch27hvm/gOdV+dzNKc/s2KomVPWcOyXNxtJGhtecAkABzaW8KHDDi5QL1kNEFx6BxFVMLO8rjFPsMVaBG9Ks6JiDQkkmrGNcnVdxI/6EKTLHTH5WLsz8+J7caDBzvKbEfTux5EamEhxIWgrI=\n```\n\nMore details on travis encryption at http://about.travis-ci.org/docs/user/encryption-keys/.\n\n**3) Hook up publishing**\n\nJust put `node-pre-gyp package publish` in your `.travis.yml` after `npm install`.\n\nIf you want binaries for OS X change your `.travis.yml` to use:\n\n```yml\nlanguage: objective-c\n```\n\nPerhaps keep that change in a different git branch and sync that when you want binaries published.\n\nNote: using `language: objective-c` instead of `language: nodejs` looses node.js specific travis sugar like a matrix for multiple node.js versions.\n\nYou can replace:\n\n```yml\nnode_js:\n  - \"0.8\"\n  - \"0.10\"\n```\n\nWith:\n\n```yml\nenv:\n  matrix:\n    - export NODE_VERSION=\"0.8\"\n    - export NODE_VERSION=\"0.10\"\n\nbefore_install:\n - git clone https://github.com/creationix/nvm.git ./.nvm\n - source ./.nvm/nvm.sh\n - nvm install $NODE_VERSION\n - nvm use $NODE_VERSION\n```\n\n**4) Publish when you want**\n\nYou might wish to publish binaries only on a specific commit. To do this you could borrow from the [travis.ci idea of commit keywords](http://about.travis-ci.org/docs/user/how-to-skip-a-build/) and add special handling for commit messages with `[publish]`:\n\n    if test \"${TRAVIS_COMMIT#*[publish]}\" != \"$TRAVIS_COMMIT\"; then\n       node-pre-gyp publish\n    fi\n\nOr you could automatically detect if the git branch is a tag:\n\n    if [[ $TRAVIS_BRANCH == `git describe --tags --always HEAD` ]] ; then\n       node-pre-gyp publish\n    fi\n\nRemember this publishing is not the same as `npm publish`. We're just talking about the\nbinary module here and not your entire npm package. To automate the publishing of your entire package to npm on travis see http://about.travis-ci.org/docs/user/deployment/npm/\n\n### Commands\n\n`node-pre-gyp` supports many of the same commands as `node-gyp` with some critical differences\n\n#### Clean install and build artifacts\n\n    node-pre-gyp clean\n\n#### Clean and install\n\n    node-pre-gyp reinstall # runs \"clean\" and \"install\"\n\n#### Build the module from source instead of installing from pre-built binary:\n\n    node-pre-gyp install --build-from-source\n\nThis is basically the equivalent to calling `node-gyp rebuild` which is what `npm install` call if you don't override (like recommended above) the `scripts/install` target in `package.json`.\n\n### Options\n\nOptions include:\n\n - `--build-from-source`\n - `--fallback-to-build`\n\nBoth of these options can be passed as they are or can provide values. So, in addition to being able to pass `--build-from-source` you can also pass `--build-from-source=myapp` where `myapp` is the name of your module.\n\nFor example: `npm install --build-from-source=myapp`. This is useful if:\n\n - `myapp` is referenced in the package.json of a larger app and therefore `myapp` is being installed as a dependent with `npm install`.\n - The larger app also depends on other modules installed with `node-pre-gyp`\n - You only want to trigger a source compile for `myapp` and the other modules.\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/springmeyer/node-pre-gyp/issues"
  },
  "homepage": "https://github.com/springmeyer/node-pre-gyp",
  "_id": "node-pre-gyp@0.2.6",
  "_from": "node-pre-gyp@~0.2.5"
}
