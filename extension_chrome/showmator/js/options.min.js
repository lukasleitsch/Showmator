var Options=function(){var t={},e="http://localhost:63123",o=io.connect(e),l,n="",a,i,c,r,u,s,g,p,f,h,m,v=function(){i=$("body"),c=$("#slug"),r=$("#submit-slug"),u=$("#slug-static"),s=$("#shortcut"),g=$("#text-only"),p=$("#blacklist"),f=$("#title-shownotes"),h=$("#title-shownotes-alert"),m=$("#create-new"),a=h.data("no-title")},d=function(t){var e="has-active-shownotes",o="has-no-active-shownotes";i.toggleClass(e,t).toggleClass(o,!t)},S=function(){chrome.commands.getAll(function(t){var e=!1;$.each(t,function(t,o){"_execute_browser_action"==o.name&&""!==o.shortcut&&(e=!0,s.text(o.shortcut.replace(/\+/g," + ")))}),e||s.html("<em>"+s.data("no-shortcut")+"</em>")})},w=function(){r.click(function(){var e=$.trim(c.val()).replace(/ /g,""),n=function(t,e){c.tooltip({title:t,placement:"bottom",trigger:"manual",html:!!e}).tooltip("show").one("keyup",function(){c.tooltip("destroy")})};e?/^[a-zA-Z0-9]+$/g.test(e)?(o.emit("createNewShownotes",{slug:e,publicSlug:l}),localStorage.slug=e,u.text(e),localStorage.publicSlug=l,d(!0),t.init()):n(c.data("invalid"),!0):n(c.data("empty"))}),c.keyup(function(t){13==t.keyCode&&r.click()}),f.keyup(function(){var t=$(this).val();t!=n&&(n=t,h.text(t||a),y(f,b))}),$("#link-to-shortcut-options").click(function(t){t.preventDefault(),chrome.tabs.create({url:"chrome://extensions/configureCommands"})}),$(window).focus(S),g.change(function(){var t=$(this).is(":checked");t?localStorage.showTextOnly=!0:localStorage.removeItem("showTextOnly"),y(g,!1,200,"top")}),p.keyup(function(){p.val()!=localStorage.blacklist&&(localStorage.blacklist=p.val(),y(p))}),m.click(function(e){e.preventDefault(),window.confirm(m.data("confirm"))&&(localStorage.removeItem("slug"),localStorage.removeItem("publicSlug"),d(!1),t.init())}),$("#alert-link-create-new").click(function(t){t.preventDefault(),i.animate({scrollTop:i.outerHeight()})})},k=function(){return Math.random().toString(36).substring(7)},b=function(){o.emit("updateShownotesTitle",{slug:localStorage.slug,title:f.val()})},y=function(t,e,o,l){o=o||1e3;var n=3e3,a=(new Date).getTime(),i=function(){return t.data("created-ts")==a};t.tooltip("destroy").data("created-ts",a),window.setTimeout(function(){i()&&("function"==typeof e&&e(),t.tooltip({title:"âœ” Gespeichert",placement:l||"right",trigger:"manual",container:"body"}).tooltip("show"),window.setTimeout(function(){i()&&t.tooltip("destroy")},n))},o)},x=function(t){return $("<div/>").html(t).text()};return t.init=function(){$(function(){v(),o.emit("requestStatus",{slug:localStorage.slug}),o.on("respondToStatus",function(t){var o;t.active?(d(!0),f.val(x(t.title)),h.text(x(t.title)||a),o=localStorage.slug,l=t.publicSlug,localStorage.publicSlug=l):(d(!1),o=k(),l=k(),h.text(a),f.val("")),c.val(o),u.text(o),n=f.val(),$("#html").prop("href",e+"/html/"+o),$("#live").prop("href",e+"/live/"+l)}),S(),g.prop("checked",!!localStorage.showTextOnly),"undefined"!=typeof localStorage.blacklist&&p.val(localStorage.blacklist),w()})},t}();Options.init();